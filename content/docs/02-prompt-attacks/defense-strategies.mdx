---
title: 第5章：防御方向预览
description: 了解 AI 安全防御的基本思路，为模块三的深入实践做好铺垫
---


import { Callout } from 'fumadocs-ui/components/callout';
import { Accordion, Accordions } from 'fumadocs-ui/components/accordion';


<Callout title="" type="info">
预计阅读约10分钟
</Callout>

## 本章导读

在前四章中，我们一直站在攻击者的视角：第1章理解了提示词注入的原理，第2章掌握了越狱技术，第3章学会了提取系统提示词，第4章深入了过滤器绕过的三个维度。这四章的攻击知识有一个共同的启示——**没有任何单一防护措施能够抵御所有攻击手段**。

那么，防御者应该怎么办？本章将用最短的篇幅为你勾勒防御的基本思路和方向。这里不展开具体的实现细节——那是模块三"AI 应用安全防御"的任务。本章的目标是让你在进入模块三之前，先建立一个清晰的防御全景认知。

## 学习目标

<Callout title="本章学完后，你将能够：" type="info">
- 理解多层防御架构的基本理念
- 知道输入层、模型层、输出层各自的防御职责
- 认识到防御是一个持续演进的过程
- 为模块三的防御实践建立概念基础
</Callout>

## 1 多层防御：AI 安全的核心思路

### 1.1 为什么需要多层防御

<Callout title="纵深防御理念">
想象你要保护家里的贵重物品。仅仅安装一把门锁够吗？一个完善的安全系统应该包括：围墙、门锁、摄像头、报警器、保安巡逻。AI 系统的安全防护也是同样的道理——攻击者可能绕过某一层防护，但要突破多层防御则困难得多。
</Callout>

回顾前四章的攻击技术，你会发现每种防御措施都有其固有的局限性：

- **输入过滤器**可以被第4章的绕过技术欺骗
- **安全对齐训练**可以被第2章的越狱技术突破
- **系统提示词限制**可以被第3章的提取技术暴露

单独依赖任何一层都不够。因此，AI 安全防御的核心思路是**多层协同**——让不同层次的防护手段互相补位。

### 1.2 三层防御架构概览

| 层次 | 职责 | 类比 | 对抗的攻击 |
|------|------|------|-----------|
| **输入层防护** | 在恶意输入到达模型之前拦截和净化 | 机场安检 | 过滤器绕过（第4章） |
| **模型层防护** | 通过提示词设计增强模型的安全边界 | 培训飞行员应对紧急情况 | 注入攻击（第1章）、越狱（第2章） |
| **输出层防护** | 检查和过滤模型的输出，防止信息泄露 | 飞机降落前的最后检查 | 提示词提取（第3章） |

这三层不是独立工作的，而是形成一个**协同防御链**：

```text title="多层防御流程"
用户输入 → [输入层：过滤/规范化] → [模型层：安全提示词约束] → [输出层：审查/脱敏] → 安全输出
```

### 1.3 防御是持续演进的过程

前四章的攻击技术告诉我们，攻防是一场持续的博弈。DAN 越狱从 1.0 迭代到 10.0+，每次防御加强后攻击者都会找到新的绕过方法。因此，防御体系不是"搭建一次就完成"的工程，而需要：

- **持续监控**：发现新的攻击模式
- **动态更新**：及时更新防御规则
- **红队测试**：主动寻找防御漏洞

## 2 各层防御的关键方向

### 2.1 输入层：拦截已知攻击

输入层是防御的第一道防线，主要技术方向包括：

- **输入规范化**：清理 Unicode 变体、不可见字符、编码混淆（直接对抗第4章的字符级绕过）
- **关键词过滤**：拦截已知的注入模式和有害关键词
- **注入检测**：识别"忽略之前指令"等典型注入结构

### 2.2 模型层：增强内在安全

模型层防御的核心是通过**系统提示词设计**来增强模型的安全边界：

- **明确角色定位**：清晰定义模型能做什么、不能做什么
- **设置安全优先级**：强调安全规则优先于用户请求
- **指令-数据分隔**：帮助模型区分系统指令和用户输入

### 2.3 输出层：最后一道防线

即使前两层都被突破，输出层仍然可以阻止不安全的内容到达用户：

- **敏感信息检测**：检查输出中是否包含个人隐私、系统配置等
- **有害内容过滤**：识别输出中的不当内容
- **降级响应**：当检测到风险时，提供安全的替代响应

## 3 模块二总结与展望

至此，我们已经走完了模块二"提示词攻击"的完整路径：

1. **注入基础**（第1章）——理解提示词注入的根本原因
2. **越狱技术**（第2章）——掌握突破安全对齐的方法
3. **提示词提取**（第3章）——学会获取系统内部配置
4. **过滤器绕过**（第4章）——系统分析防御机制的弱点
5. **防御预览**（第5章）——建立多层防御的全景认知

这五章构成了一个完整的"攻防认知闭环"：理解攻击原理→掌握攻击技术→认识防御方向。

<Callout title="下一步：从认知到实践" type="success">
本章只是勾勒了防御的方向。在**模块三：AI 应用安全防御**中，你将亲手实践这些防御技术：
- 设计安全的系统提示词并验证其防御效果
- 编写输入过滤器和输出审查器
- 将各层防御组件串联为完整的安全 AI 应用
- 对自己构建的系统进行红蓝对抗测试

从"知道怎么攻"到"学会怎么防"，模块三将带你完成这个关键转变。
</Callout>

## 课后思考

<Accordions>
  <Accordion title="思考题1：回顾攻击与防御的关系">
    回顾第1-4章学到的攻击技术，试着为每种攻击技术想一个对应的防御思路。你认为哪种攻击最难防御？为什么？
  </Accordion>
  <Accordion title="思考题2：设计一个防御方案">
    假设你负责一个 AI 客服系统的安全。基于本章介绍的三层防御架构，列出你认为每一层最重要的一项防御措施，并解释你的选择理由。
  </Accordion>
</Accordions>

## 延伸阅读

- [OWASP Top 10 for LLM Applications](https://owasp.org/www-project-top-10-for-large-language-model-applications/)
- [NIST AI RMF 1.0](https://www.nist.gov/publications/artificial-intelligence-risk-management-framework-ai-rmf-10)
